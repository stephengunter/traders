webpackHotUpdate(14,{

/***/ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/vuetify-loader/lib/loader.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/client/views/Auth.vue?vue&type=script&lang=js&":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/babel-loader/lib!./node_modules/vuetify-loader/lib/loader.js!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/client/views/Auth.vue?vue&type=script&lang=js& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var C_Users_Stephen_source_repos_Traders_Web_resources_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/objectSpread */ \"./node_modules/@babel/runtime/helpers/esm/objectSpread.js\");\n/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vuex */ \"./node_modules/vuex/dist/vuex.esm.js\");\n/* harmony import */ var _store_actions_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../store/actions.type */ \"./src/client/store/actions.type.js\");\n/* harmony import */ var _common_authService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/common/authService */ \"./src/common/authService.js\");\n/* harmony import */ var _common_jwt__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/common/jwt */ \"./src/common/jwt.js\");\n\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'AuthView',\n  data: function data() {\n    return {\n      returnUrl: ''\n    };\n  },\n  computed: Object(C_Users_Stephen_source_repos_Traders_Web_resources_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, Object(vuex__WEBPACK_IMPORTED_MODULE_1__[\"mapGetters\"])(['isAuthenticated'])),\n  beforeMount: function beforeMount() {\n    var _this = this;\n\n    if (this.$route.query && this.$route.query.returnUrl) {\n      this.returnUrl = this.$route.query.returnUrl;\n    }\n\n    if (this.isAuthenticated) {\n      this.redirect();\n    } else {\n      var tokenStatus = _common_jwt__WEBPACK_IMPORTED_MODULE_4__[\"default\"].tokenStatus();\n\n      if (tokenStatus === -1) {\n        //token過期\n        this.$store.dispatch(_store_actions_type__WEBPACK_IMPORTED_MODULE_2__[\"REFRESH_TOKEN\"]).then(function (token) {\n          if (token) {\n            _this.redirect();\n          } else {\n            //REFRESH_TOKEN 失敗\n            _this.redirectToLogin();\n          }\n        });\n      } else if (tokenStatus === 0) {\n        //token 即將到期\n        this.$store.dispatch(_store_actions_type__WEBPACK_IMPORTED_MODULE_2__[\"REFRESH_TOKEN\"]).then(function (token) {\n          if (token) {\n            _this.redirect();\n          } else {\n            //REFRESH_TOKEN 失敗\n            _this.redirectToLogin();\n          }\n        });\n      } else {\n        //token正常\n        this.redirect();\n      }\n    }\n  },\n  methods: {\n    redirect: function redirect() {\n      if (this.returnUrl) this.$router.push({\n        path: this.returnUrl\n      });else this.$router.push({\n        name: 'home'\n      });\n    },\n    redirectToLogin: function redirectToLogin() {\n      if (this.returnUrl) {\n        this.$router.push({\n          path: '/login',\n          query: {\n            returnUrl: this.returnUrl\n          }\n        });\n      } else this.$router.push({\n        path: '/login'\n      });\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPyEuL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4vbm9kZV9tb2R1bGVzL3Z1ZXRpZnktbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPyEuL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8hLi9zcmMvY2xpZW50L3ZpZXdzL0F1dGgudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9BdXRoLnZ1ZT83ZGYxIl0sInNvdXJjZXNDb250ZW50IjpbIjx0ZW1wbGF0ZT5cclxuICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lclwiPlxyXG4gICAgICBcclxuICAgPC9kaXY+XHJcbjwvdGVtcGxhdGU+XHJcblxyXG48c2NyaXB0PlxyXG5pbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7XHJcblxyXG5pbXBvcnQgeyBSRUZSRVNIX1RPS0VOIH0gZnJvbSAnLi4vc3RvcmUvYWN0aW9ucy50eXBlJztcclxuaW1wb3J0IEF1dGhTZXJ2aWNlIGZyb20gJ0AvY29tbW9uL2F1dGhTZXJ2aWNlJztcclxuaW1wb3J0IEp3dFNlcnZpY2UgZnJvbSAnQC9jb21tb24vand0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgbmFtZTogJ0F1dGhWaWV3JyxcclxuICAgZGF0YSAoKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgIHJldHVyblVybDogJydcclxuICAgICAgfVxyXG4gICB9LFxyXG4gICBjb21wdXRlZDoge1xyXG4gICAgICAuLi5tYXBHZXR0ZXJzKFsnaXNBdXRoZW50aWNhdGVkJ10pICAgICAgXHJcbiAgIH0sXHJcbiAgIGJlZm9yZU1vdW50KCl7XHJcbiAgICAgIGlmKHRoaXMuJHJvdXRlLnF1ZXJ5ICYmIHRoaXMuJHJvdXRlLnF1ZXJ5LnJldHVyblVybCl7XHJcbiAgICAgICAgIHRoaXMucmV0dXJuVXJsID0gdGhpcy4kcm91dGUucXVlcnkucmV0dXJuVXJsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZih0aGlzLmlzQXV0aGVudGljYXRlZCl7XHJcbiAgICAgICAgIHRoaXMucmVkaXJlY3QoKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgIGxldCB0b2tlblN0YXR1cyA9IEp3dFNlcnZpY2UudG9rZW5TdGF0dXMoKTtcclxuICAgICAgICAgaWYodG9rZW5TdGF0dXMgPT09IC0xKXtcclxuICAgICAgICAgICAgLy90b2tlbumBjuacn1xyXG4gICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChSRUZSRVNIX1RPS0VOKS50aGVuKHRva2VuID0+IHtcdFxyXG4gICAgICAgICAgICAgICBpZih0b2tlbil7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVkaXJlY3QoKTtcclxuICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgIC8vUkVGUkVTSF9UT0tFTiDlpLHmlZdcclxuICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvTG9naW4oKTtcclxuICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVx0XHJcbiAgICAgICAgIH1lbHNlIGlmKHRva2VuU3RhdHVzID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vdG9rZW4g5Y2z5bCH5Yiw5pyfXHJcbiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKFJFRlJFU0hfVE9LRU4pLnRoZW4odG9rZW4gPT4ge1x0XHJcbiAgICAgICAgICAgICAgIGlmKHRva2VuKXtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdCgpO1xyXG4gICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgLy9SRUZSRVNIX1RPS0VOIOWkseaVl1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0VG9Mb2dpbigpO1xyXG4gICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHQgICBcclxuICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vdG9rZW7mraPluLhcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdCgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgfSxcclxuICAgbWV0aG9kczp7XHJcbiAgICAgIHJlZGlyZWN0KCl7XHJcbiAgICAgICAgIGlmKHRoaXMucmV0dXJuVXJsKSB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHRoaXMucmV0dXJuVXJsIH0pO1xyXG4gICAgICAgICBlbHNlIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2hvbWUnIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICByZWRpcmVjdFRvTG9naW4oKXtcclxuICAgICAgICAgaWYodGhpcy5yZXR1cm5Vcmwpe1xyXG4gICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nLCAgcXVlcnk6eyByZXR1cm5Vcmw6IHRoaXMucmV0dXJuVXJsIH19KTtcclxuICAgICAgICAgfSBcclxuICAgICAgICAgZWxzZSB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nIH0pO1xyXG4gICAgICB9XHJcbiAgIH1cclxufVxyXG48L3NjcmlwdD5cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQU9BO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBVkE7QUE3Q0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/vuetify-loader/lib/loader.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/client/views/Auth.vue?vue&type=script&lang=js&\n");

/***/ }),

/***/ "./src/client/services/auth.js":
false

})