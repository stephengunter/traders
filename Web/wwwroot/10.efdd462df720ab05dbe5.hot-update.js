webpackHotUpdate(10,{

/***/ "./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/vuetify-loader/lib/loader.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/admin/views/Auth.vue?vue&type=script&lang=js&":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/cache-loader/dist/cjs.js??ref--12-0!./node_modules/babel-loader/lib!./node_modules/vuetify-loader/lib/loader.js!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./src/admin/views/Auth.vue?vue&type=script&lang=js& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _store_actions_type__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../store/actions.type */ \"./src/admin/store/actions.type.js\");\n/* harmony import */ var _common_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/common/jwt */ \"./src/common/jwt.js\");\n/* harmony import */ var _common_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/common/config */ \"./src/common/config.js\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'AuthView',\n  data: function data() {\n    return {\n      returnUrl: ''\n    };\n  },\n  beforeMount: function beforeMount() {\n    var _this = this;\n\n    if (this.$route.query && this.$route.query.returnUrl) {\n      this.returnUrl = this.$route.query.returnUrl;\n    }\n\n    this.$store.dispatch(_store_actions_type__WEBPACK_IMPORTED_MODULE_0__[\"CHECK_AUTH\"]).then(function (user) {\n      if (user) {\n        var tokenStatus = _common_jwt__WEBPACK_IMPORTED_MODULE_1__[\"default\"].tokenStatus();\n\n        if (tokenStatus === -1) {\n          //token過期\n          _this.$store.dispatch(_store_actions_type__WEBPACK_IMPORTED_MODULE_0__[\"REFRESH_TOKEN\"]).then(function (token) {\n            if (token) {\n              _this.redirect();\n            } else {\n              //REFRESH_TOKEN 失敗\n              _this.redirectToLogin();\n            }\n          });\n        } else if (tokenStatus === 0) {\n          //token 即將到期\n          _this.$store.dispatch(_store_actions_type__WEBPACK_IMPORTED_MODULE_0__[\"REFRESH_TOKEN\"]).then(function (token) {\n            if (token) {\n              _this.redirect();\n            } else {\n              //REFRESH_TOKEN 失敗\n              _this.redirectToLogin();\n            }\n          });\n        } else {\n          //token正常\n          _this.redirect();\n        }\n      } else {\n        _this.redirectToLogin();\n      }\n    });\n  },\n  methods: {\n    redirect: function redirect() {\n      if (this.returnUrl) this.$router.push({\n        path: this.returnUrl\n      });else this.$router.push({\n        name: 'home'\n      });\n    },\n    redirectToLogin: function redirectToLogin() {\n      window.location = \"\".concat(_common_config__WEBPACK_IMPORTED_MODULE_2__[\"LOGIN_URL\"], \"?returnUrl=admin\");\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPyEuL25vZGVfbW9kdWxlcy9iYWJlbC1sb2FkZXIvbGliL2luZGV4LmpzIS4vbm9kZV9tb2R1bGVzL3Z1ZXRpZnktbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9ub2RlX21vZHVsZXMvY2FjaGUtbG9hZGVyL2Rpc3QvY2pzLmpzPyEuL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9pbmRleC5qcz8hLi9zcmMvYWRtaW4vdmlld3MvQXV0aC52dWU/dnVlJnR5cGU9c2NyaXB0Jmxhbmc9anMmLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL0F1dGgudnVlPzdkZjEiXSwic291cmNlc0NvbnRlbnQiOlsiPHRlbXBsYXRlPlxyXG5cdDx2LWNvbnRhaW5lciBmbHVpZCBncmlkLWxpc3QteGwgZmlsbC1oZWlnaHQ+XHJcbiAgICAgPHYtbGF5b3V0IGp1c3RpZnktY2VudGVyICBhbGlnbi1jZW50ZXI+XHJcblx0XHRcdFxyXG4gICAgIDwvdi1sYXlvdXQ+XHJcblx0PC92LWNvbnRhaW5lcj5cclxuICAgIFxyXG5cdFxyXG48L3RlbXBsYXRlPlxyXG5cclxuPHNjcmlwdD5cclxuaW1wb3J0IHsgQ0hFQ0tfQVVUSCwgUkVGUkVTSF9UT0tFTiB9IGZyb20gJy4uL3N0b3JlL2FjdGlvbnMudHlwZSc7XHJcblxyXG5pbXBvcnQgSnd0U2VydmljZSBmcm9tICdAL2NvbW1vbi9qd3QnO1xyXG5pbXBvcnQgeyBMT0dJTl9VUkwgfSBmcm9tICdAL2NvbW1vbi9jb25maWcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG5cdG5hbWU6ICdBdXRoVmlldycsXHJcblx0ZGF0YSAoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXR1cm5Vcmw6ICcnXHJcblx0XHR9XHJcblx0fSxcclxuXHRiZWZvcmVNb3VudCgpe1xyXG4gICAgICBpZih0aGlzLiRyb3V0ZS5xdWVyeSAmJiB0aGlzLiRyb3V0ZS5xdWVyeS5yZXR1cm5Vcmwpe1xyXG4gICAgICAgICB0aGlzLnJldHVyblVybCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnJldHVyblVybDtcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0dGhpcy4kc3RvcmUuZGlzcGF0Y2goQ0hFQ0tfQVVUSCkudGhlbigodXNlcikgPT4ge1xyXG5cdFx0XHRpZih1c2VyKXsgIFxyXG5cdFx0XHRcdGxldCB0b2tlblN0YXR1cyA9IEp3dFNlcnZpY2UudG9rZW5TdGF0dXMoKTtcclxuXHRcdFx0XHRpZih0b2tlblN0YXR1cyA9PT0gLTEpe1xyXG5cdFx0XHRcdFx0Ly90b2tlbumBjuacn1xyXG5cdFx0XHRcdFx0dGhpcy4kc3RvcmUuZGlzcGF0Y2goUkVGUkVTSF9UT0tFTikudGhlbih0b2tlbiA9PiB7XHRcclxuXHRcdFx0XHRcdFx0aWYodG9rZW4pe1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVkaXJlY3QoKTtcclxuXHRcdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdFx0Ly9SRUZSRVNIX1RPS0VOIOWkseaVl1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVkaXJlY3RUb0xvZ2luKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pXHRcclxuXHRcdFx0XHR9ZWxzZSBpZih0b2tlblN0YXR1cyA9PT0gMCkge1xyXG5cdFx0XHRcdFx0Ly90b2tlbiDljbPlsIfliLDmnJ9cclxuXHRcdFx0XHRcdHRoaXMuJHN0b3JlLmRpc3BhdGNoKFJFRlJFU0hfVE9LRU4pLnRoZW4odG9rZW4gPT4ge1x0XHJcblx0XHRcdFx0XHRcdGlmKHRva2VuKXtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlZGlyZWN0KCk7XHJcblx0XHRcdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0XHRcdC8vUkVGUkVTSF9UT0tFTiDlpLHmlZdcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlZGlyZWN0VG9Mb2dpbigpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KVx0ICAgXHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHQvL3Rva2Vu5q2j5bi4XHJcblx0XHRcdFx0XHR0aGlzLnJlZGlyZWN0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHR9ZWxzZXtcclxuXHRcdFx0XHR0aGlzLnJlZGlyZWN0VG9Mb2dpbigpO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cclxuICAgfSxcclxuXHRtZXRob2RzOiB7XHJcblx0XHRyZWRpcmVjdCgpe1xyXG4gICAgICAgICBpZih0aGlzLnJldHVyblVybCkgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiB0aGlzLnJldHVyblVybCB9KTtcclxuICAgICAgICAgZWxzZSB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdob21lJyB9KTtcclxuICAgICAgfSxcclxuXHRcdHJlZGlyZWN0VG9Mb2dpbigpe1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24gPSBgJHtMT0dJTl9VUkx9P3JldHVyblVybD1hZG1pbmA7XHJcblx0XHR9LFxyXG5cclxuXHR9XHJcbn1cclxuPC9zY3JpcHQ+XHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQVdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUEvQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/cache-loader/dist/cjs.js?!./node_modules/babel-loader/lib/index.js!./node_modules/vuetify-loader/lib/loader.js!./node_modules/cache-loader/dist/cjs.js?!./node_modules/vue-loader/lib/index.js?!./src/admin/views/Auth.vue?vue&type=script&lang=js&\n");

/***/ })

})