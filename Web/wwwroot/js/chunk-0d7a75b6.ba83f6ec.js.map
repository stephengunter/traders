{"version":3,"sources":["webpack:///./src/client/views/Login.vue?8d97","webpack:///./src/client/components/login/Form.vue?1c1e","webpack:///src/client/components/login/Form.vue","webpack:///./src/client/components/login/Form.vue?f9e0","webpack:///./src/client/components/login/Form.vue","webpack:///./src/client/components/login/Facebook.vue?86c6","webpack:///src/client/components/login/Facebook.vue","webpack:///./src/client/components/login/Facebook.vue?c44e","webpack:///./src/client/components/login/Facebook.vue","webpack:///./src/client/components/login/Google.vue?738c","webpack:///src/client/components/login/Google.vue","webpack:///./src/client/components/login/Google.vue?6332","webpack:///./src/client/components/login/Google.vue","webpack:///src/client/views/Login.vue","webpack:///./src/client/views/Login.vue?ec9e","webpack:///./src/client/views/Login.vue","webpack:///./src/client/views/Login.vue?7357"],"names":["render","_vm","this","_h","$createElement","_c","_self","result","attrs","email","credentials","staticClass","_v","model","registerModel","on","submit","onSubmitRegister","onSubmit","row","wrap","xs12","success","onFBLoginSuccess","failed","oAuthLoginFailed","onGoogleLoginSuccess","href","staticRenderFns","Formvue_type_template_id_22aeaf28_render","$event","preventDefault","directives","name","rawName","value","expression","error-messages","errors","collect","label","data-vv-name","required","callback","$$v","$set","type","counter","color","click","Formvue_type_template_id_22aeaf28_staticRenderFns","Formvue_type_script_lang_js_","data","password","methods","_this","$validator","validate","then","valid","$emit","login_Formvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","Form","installComponents_default","VBtn","VFlex","VLayout","VTextField","Facebookvue_type_template_id_d970a850_render","params","fbSignInParams","onSignInSuccess","error","onSignInError","Facebookvue_type_template_id_d970a850_staticRenderFns","Facebookvue_type_script_lang_js_","scope","return_scopes","created","response","accessToken","authResponse","login_Facebookvue_type_script_lang_js_","Facebook_component","Facebook","Googlevue_type_template_id_503574d5_render","googleSignInParams","Googlevue_type_template_id_503574d5_staticRenderFns","Googlevue_type_script_lang_js_","client_id","concat","config","googleUser","getAuthResponse","id_token","login_Googlevue_type_script_lang_js_","Google_component","Google","Loginvue_type_script_lang_js_","components","ErrorList","LoginForm","FacebookLogin","GoogleLogin","RegisterForm","register_Form","register-un-confirmed","UnConfirmed","returnUrl","register","emailUnConfirmed","beforeMount","$route","query","$store","commit","mutations_type","dispatch","actions_type","onSuccess","catch","resolveError","Bus","hasOwnProperty","redirect","window","location","$router","push","path","msg","oAuthLoginSuccess","initRegister","token","_this2","_this3","user","_this4","views_Loginvue_type_script_lang_js_","Login_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_837143ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_837143ba_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-0d7a75b6.ba83f6ec.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.result.emailUnConfirmed)?_c('register-un-confirmed',{attrs:{\"email\":_vm.credentials.email}}):_c('div',{staticClass:\"container\"},[(_vm.register)?_c('div',[_c('h1',{staticClass:\"cn\"},[_vm._v(\"註冊 - 建立您的會員資料\")]),_c('ErrorList'),_c('RegisterForm',{attrs:{\"model\":_vm.registerModel},on:{\"submit\":_vm.onSubmitRegister}})],1):_c('div',[_c('h1',{staticClass:\"cn\"},[_vm._v(\"登入\")]),_c('ErrorList'),_c('LoginForm',{on:{\"submit\":_vm.onSubmit}}),_c('v-layout',{staticClass:\"mt-3 cn\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('FacebookLogin',{on:{\"success\":_vm.onFBLoginSuccess,\"failed\":_vm.oAuthLoginFailed}})],1),_c('v-flex',{staticClass:\"mt-3\",attrs:{\"xs12\":\"\"}},[_c('GoogleLogin',{on:{\"success\":_vm.onGoogleLoginSuccess,\"failed\":_vm.oAuthLoginFailed}})],1),_c('v-flex',{staticClass:\"mt-3\",attrs:{\"xs12\":\"\"}},[_c('a',{staticClass:\"links v-breadcrumbs__item\",attrs:{\"href\":\"#/forgot-password\"}},[_vm._v(\"忘記密碼\")]),_c('a',{staticClass:\"links ml-5 v-breadcrumbs__item\",attrs:{\"href\":\"#/register\"}},[_vm._v(\"註冊新帳號\")])])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|email'),expression:\"'required|email'\"}],attrs:{\"error-messages\":_vm.errors.collect('email'),\"label\":\"Email\",\"data-vv-name\":\"email\",\"required\":\"\"},model:{value:(_vm.credentials.email),callback:function ($$v) {_vm.$set(_vm.credentials, \"email\", $$v)},expression:\"credentials.email\"}}),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|max:12'),expression:\"'required|max:12'\"}],attrs:{\"type\":\"password\",\"counter\":12,\"error-messages\":_vm.errors.collect('password'),\"label\":\"密碼\",\"data-vv-name\":\"password\",\"required\":\"\"},model:{value:(_vm.credentials.password),callback:function ($$v) {_vm.$set(_vm.credentials, \"password\", $$v)},expression:\"credentials.password\"}}),_c('v-layout',{staticClass:\"mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"cn\",attrs:{\"type\":\"submit\",\"color\":\"success\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_vm._v(\"登入\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <form @submit.prevent=\"onSubmit\">\r\n      <v-text-field\r\n         v-validate=\"'required|email'\"\r\n         v-model=\"credentials.email\"\r\n         :error-messages=\"errors.collect('email')\"\r\n         label=\"Email\"\r\n         data-vv-name=\"email\"\r\n         required\r\n      ></v-text-field>\r\n\r\n      <v-text-field\r\n         type=\"password\"\r\n         v-validate=\"'required|max:12'\"\r\n         v-model=\"credentials.password\"\r\n         :counter=\"12\"\r\n         :error-messages=\"errors.collect('password')\"\r\n         label=\"密碼\"\r\n         data-vv-name=\"password\"\r\n         required\r\n      ></v-text-field>\r\n      <v-layout class=\"mt-1\" row wrap>\r\n         <v-flex xs12>\r\n            <v-btn type=\"submit\" @click.prevent=\"onSubmit\" color=\"success\" class=\"cn\">登入</v-btn>\r\n         </v-flex>\r\n      </v-layout>\r\n      \r\n   </form>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n   name: 'LoginForm',\r\n   data() {\r\n      return {\r\n         credentials: {\r\n            email: '',\r\n            password: '',\r\n         }\r\n      }\r\n   },\r\n   methods: {\r\n      onSubmit() {\r\n         this.$validator.validate().then(valid => {\r\n            if(valid) this.$emit('submit', this.credentials);\r\n         });         \r\n      }\r\n   }\r\n};\r\n</script>\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=22aeaf28&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Form.vue\"\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VFlex } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\ninstallComponents(component, {\n  VBtn,\n  VFlex,\n  VLayout,\n  VTextField,\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"loginBtn loginBtn--facebook\"},[_c('fb-signin-button',{attrs:{\"params\":_vm.fbSignInParams},on:{\"success\":_vm.onSignInSuccess,\"error\":_vm.onSignInError}},[_vm._v(\"\\n   使用 facebook 登入\\n   \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <button class=\"loginBtn loginBtn--facebook\">\r\n      <fb-signin-button\r\n         :params=\"fbSignInParams\"\r\n         @success=\"onSignInSuccess\"\r\n         @error=\"onSignInError\"\r\n      >\r\n      使用 facebook 登入\r\n      </fb-signin-button>\r\n   </button>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n   name: 'FacebookLogin',\r\n   data() {\r\n      return {\r\n         fbSignInParams: {\r\n            scope: 'email',\r\n            return_scopes: true\r\n         }\r\n      }\r\n   },\r\n   created(){\r\n      \r\n   },\r\n   methods: {\r\n      onSignInSuccess (response) {\r\n         let accessToken = response.authResponse.accessToken;\r\n         this.$emit('success', accessToken);\r\n      },\r\n      onSignInError (error) {\r\n         this.$emit('failed');\r\n      }\r\n   }\r\n};\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Facebook.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Facebook.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Facebook.vue?vue&type=template&id=d970a850&\"\nimport script from \"./Facebook.vue?vue&type=script&lang=js&\"\nexport * from \"./Facebook.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Facebook.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"loginBtn loginBtn--google\"},[_c('g-signin-button',{attrs:{\"params\":_vm.googleSignInParams},on:{\"success\":_vm.onSignInSuccess,\"error\":_vm.onSignInError}},[_vm._v(\"\\n   使用 google 登入\\n   \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <button class=\"loginBtn loginBtn--google\">\r\n      <g-signin-button \r\n      :params=\"googleSignInParams\"\r\n      @success=\"onSignInSuccess\"\r\n      @error=\"onSignInError\"\r\n      >\r\n      使用 google 登入\r\n      </g-signin-button>\r\n   </button>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport { GOOGLE_API } from '@/common/config';\r\nexport default {\r\n   name: 'GoogleLogin',\r\n   data() {\r\n      return {\r\n         googleSignInParams: {\r\n            client_id:  `${GOOGLE_API.client_id}.apps.googleusercontent.com`\r\n         }\r\n      }\r\n   },\r\n   methods: {\r\n      onSignInSuccess (googleUser) {\r\n         this.$emit('success', googleUser.getAuthResponse().id_token);\r\n      },\r\n      onSignInError (error) {\r\n         this.$emit('failed');\r\n      }\r\n   }\r\n};\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Google.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Google.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Google.vue?vue&type=template&id=503574d5&\"\nimport script from \"./Google.vue?vue&type=script&lang=js&\"\nexport * from \"./Google.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Google.vue\"\nexport default component.exports","<template>\r\n   <register-un-confirmed v-if=\"result.emailUnConfirmed\" :email=\"credentials.email\" />\r\n   <div v-else class=\"container\">\r\n      <div v-if=\"register\">\r\n         <h1 class=\"cn\">註冊 - 建立您的會員資料</h1>\r\n         <ErrorList />\r\n         <RegisterForm :model=\"registerModel\" @submit=\"onSubmitRegister\" />         \r\n      </div>\r\n      <div v-else>\r\n         <h1 class=\"cn\">登入</h1>\r\n         <ErrorList />\r\n         <LoginForm @submit=\"onSubmit\" />\r\n         <v-layout class=\"mt-3 cn\" row wrap>\r\n            <v-flex xs12 >\r\n               <FacebookLogin \r\n                @success=\"onFBLoginSuccess\" @failed=\"oAuthLoginFailed\"\r\n               />\r\n            </v-flex>\r\n            <v-flex xs12 class=\"mt-3\">\r\n               <GoogleLogin \r\n                @success=\"onGoogleLoginSuccess\" @failed=\"oAuthLoginFailed\"\r\n               />\r\n            </v-flex>\r\n            <v-flex xs12 class=\"mt-3\">\r\n               <a href=\"#/forgot-password\" class=\"links v-breadcrumbs__item\">忘記密碼</a>\r\n               \r\n               <a href=\"#/register\" class=\"links ml-5 v-breadcrumbs__item\">註冊新帳號</a>\r\n            \r\n            </v-flex>\r\n         </v-layout>\r\n      </div>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport { CLEAR_ERROR, SET_ERROR } from '../store/mutations.type';\r\nimport { LOGIN, FB_LOGIN, GOOGLE_LOGIN, OAUTH_REGISTER } from '../store/actions.type';\r\nimport { ADMIN_URL } from '@/common/config';\r\n\r\nimport ErrorList from '@/components/ErrorList';\r\nimport LoginForm from '../components/login/Form';\r\nimport RegisterUnConfirmed from '../components/register/UnConfirmed';\r\nimport FacebookLogin from '../components/login/Facebook';\r\nimport GoogleLogin from '../components/login/Google';\r\nimport RegisterForm from '../components/register/Form';\r\n\r\nexport default {\r\n   name: 'RwvLogin',\r\n   components: {\r\n      ErrorList,\r\n      LoginForm,\r\n      FacebookLogin,\r\n      GoogleLogin,\r\n      RegisterForm,\r\n      'register-un-confirmed' : RegisterUnConfirmed\r\n   },\r\n   data () {\r\n      return {\r\n         credentials: null,\r\n         returnUrl: '',\r\n        \r\n         register: false,\r\n         registerModel: null,\r\n\r\n         result:{\r\n            emailUnConfirmed: false\r\n         }\r\n\r\n\r\n      }\r\n   },\r\n   beforeMount(){\r\n      this.returnUrl = this.$route.query.returnUrl;\r\n   },\r\n   methods: {\r\n      onSubmit(credentials) {\r\n         this.credentials = credentials;\r\n         \r\n         this.$store.commit(CLEAR_ERROR);\r\n         this.$store\r\n         .dispatch(LOGIN, credentials)\r\n         .then(() => {\r\n            this.onSuccess();              \r\n         })\r\n         .catch(error => {\r\n            if(!error)  Bus.$emit('errors');\r\n            else this.resolveError(error);\r\n         })\r\n      },\r\n      resolveError(error){       \r\n         if(error.hasOwnProperty('email_confirm')){\r\n            //email驗證\r\n            this.result.emailUnConfirmed = true;\r\n         }else{\r\n            //輸入錯誤, 登入失敗\r\n            this.$store.commit(SET_ERROR, error);\r\n         }\r\n      },\r\n      onSuccess(){\r\n         this.redirect();\r\n      },\r\n      redirect(){\r\n         if(this.returnUrl){\r\n            if(this.returnUrl === 'admin') {\r\n               window.location = ADMIN_URL;\r\n            }else {\r\n               this.$router.push({ path: this.returnUrl });\r\n            }\r\n         }\r\n         else this.$router.push({ name: 'home' });\r\n      },\r\n      oAuthLoginFailed(){\r\n         Bus.$emit('errors', { msg: '登入失敗' });\r\n      },\r\n      oAuthLoginSuccess(model){\r\n         if(model){\r\n            //還沒註冊\r\n            this.initRegister(model);\r\n         }else{\r\n            //登入成功\r\n            this.onSuccess();  \r\n         }  \r\n      },\r\n      onGoogleLoginSuccess(token){\r\n         this.$store.commit(CLEAR_ERROR);\r\n         this.$store\r\n            .dispatch(GOOGLE_LOGIN, token)\r\n            .then(model => {\r\n               this.oAuthLoginSuccess(model);          \r\n            }).catch(error => {\r\n               this.oAuthLoginFailed();\r\n            })\r\n      },\r\n      onFBLoginSuccess(token){\r\n         this.$store.commit(CLEAR_ERROR);\r\n         this.$store\r\n            .dispatch(FB_LOGIN, token)\r\n            .then(model => {\r\n               this.oAuthLoginSuccess(model);                 \r\n            }).catch(error => {\r\n               this.oAuthLoginFailed();\r\n            })\r\n      },\r\n      initRegister(model){\r\n         this.registerModel = model;\r\n         this.register = true;\r\n      },\r\n      onSubmitRegister(user){\r\n         this.$store.commit(CLEAR_ERROR);\r\n         this.$store\r\n         .dispatch(OAUTH_REGISTER, user)\r\n         .then(() => {\r\n            this.onSuccess();            \r\n         }).catch(error => {\r\n            this.oAuthLoginFailed();\r\n         })\r\n      }\r\n   },\r\n   \r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.links{\r\n   font-size: 1.2rem\r\n}\r\n/* Shared */\r\n.loginBtn {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  /* width: 13em;  - apply for fixed size */\r\n  margin: 0.2em;\r\n  padding: 0 15px 0 46px;\r\n  border: none;\r\n  text-align: left;\r\n  line-height: 34px;\r\n  white-space: nowrap;\r\n  border-radius: 0.2em;\r\n  font-size: 16px;\r\n  color: #FFF;\r\n}\r\n.loginBtn:before {\r\n  content: \"\";\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 34px;\r\n  height: 100%;\r\n}\r\n.loginBtn:focus {\r\n  outline: none;\r\n}\r\n.loginBtn:active {\r\n  box-shadow: inset 0 0 0 32px rgba(0,0,0,0.1);\r\n}\r\n\r\n\r\n/* Facebook */\r\n.loginBtn--facebook {\r\n  background-color: #4C69BA;\r\n  background-image: linear-gradient(#4C69BA, #3B55A0);\r\n  /*font-family: \"Helvetica neue\", Helvetica Neue, Helvetica, Arial, sans-serif;*/\r\n  text-shadow: 0 -1px 0 #354C8C;\r\n}\r\n.loginBtn--facebook:before {\r\n  border-right: #364e92 1px solid;\r\n  background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_facebook.png') 6px 6px no-repeat;\r\n}\r\n.loginBtn--facebook:hover,\r\n.loginBtn--facebook:focus {\r\n  background-color: #5B7BD5;\r\n  background-image: linear-gradient(#5B7BD5, #4864B1);\r\n}\r\n\r\n\r\n/* Google */\r\n.loginBtn--google {\r\n  /*font-family: \"Roboto\", Roboto, arial, sans-serif;*/\r\n  background: #DD4B39;\r\n}\r\n.loginBtn--google:before {\r\n  border-right: #BB3F30 1px solid;\r\n  background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_google.png') 6px 6px no-repeat;\r\n}\r\n.loginBtn--google:hover,\r\n.loginBtn--google:focus {\r\n  background: #E74B37;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=837143ba&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=837143ba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"837143ba\",\n  null\n  \n)\n\ncomponent.options.__file = \"Login.vue\"\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\ninstallComponents(component, {\n  VFlex,\n  VLayout,\n})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=837143ba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=837143ba&scoped=true&lang=css&\""],"sourceRoot":""}