(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea844016"],{"22e5":function(t,e,a){},"50b5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return 0===t.result?a("div",{staticClass:"container"},[t.emailSend?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-alert",{staticClass:"title cn",attrs:{value:!0,type:"info"}},[a("span",{staticClass:"cn"},[t._v("\n             已經Email一封驗證信給您.  請查看您的Email來完成驗證.  \n            ")])])],1)],1):a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-alert",{staticClass:"title",attrs:{value:!0,color:"error",icon:"warning",outline:""}},[a("span",{staticClass:"cn"},[t._v("\n               您的Email尚未驗證\n            ")])])],1),a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticClass:"cn",staticStyle:{margin:"6px 0px"},attrs:{color:"info"},on:{click:t.sendEmail}},[t._v("\n           重發認證信\n         ")])],1)],1)],1):a("div",{staticClass:"container"},[a("h1",{staticClass:"cn"},[t._v("登入")]),a("v-alert",{attrs:{value:t.Errors.any(),color:"error",outline:""}},[a("ErrorList",{attrs:{model:t.Errors}})],1),a("LoginForm",{on:{submit:t.onSubmit}}),a("v-layout",{staticClass:"mt-3 cn",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("button",{staticClass:"loginBtn loginBtn--facebook",on:{click:function(e){return e.preventDefault(),t.fbLogin(e)}}},[t._v("\n            使用 facebook 登入\n         ")])]),a("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[a("button",{staticClass:"loginBtn loginBtn--google"},[t._v("\n         使用 google 登入\n         ")])]),a("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[a("a",{staticClass:"links v-breadcrumbs__item",attrs:{href:"#/forgot-password"}},[t._v("忘記密碼")]),a("a",{staticClass:"links ml-5 v-breadcrumbs__item",attrs:{href:"#/register"}},[t._v("註冊新帳號")])])],1)],1)},s=[],r=a("be94"),i=(a("cadf"),a("551c"),a("097d"),a("2f62")),o=a("bf31"),l=a("05b3"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"error-messages":t.errors.collect("email"),label:"Email","data-vv-name":"email",required:""},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:12",expression:"'required|max:12'"}],attrs:{type:"password",counter:12,"error-messages":t.errors.collect("password"),label:"密碼","data-vv-name":"password",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),a("v-layout",{staticClass:"mt-1",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{staticClass:"cn",attrs:{color:"success"},on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v("登入")])],1)],1)],1)},u=[],d={name:"LoginForm",data:function(){return{credentials:{email:"",password:""}}},methods:{onSubmit:function(){var t=this;this.$validator.validate().then(function(e){e&&t.$emit("submit",t.credentials)})}}},f=d,v=(a("91c2"),a("2877")),m=a("6544"),h=a.n(m),p=a("8336"),b=a("0e8f"),w=a("a722"),g=a("2677"),x=Object(v["a"])(f,c,u,!1,null,"4215e6f2",null);x.options.__file="Form.vue";var _=x.exports;h()(x,{VBtn:p["a"],VFlex:b["a"],VLayout:w["a"],VTextField:g["a"]});var C=a("e815"),E={name:"RwvLogin",components:{ErrorList:l["a"],LoginForm:_},data:function(){return{credentials:null,result:-1,returnUrl:"",emailSend:!1,authWindow:null}},computed:Object(r["a"])({},Object(i["c"])({Errors:function(t){return t.auth.errors}})),beforeMount:function(){this.returnUrl=this.$route.query.returnUrl},created:function(){window.addEventListener?window.addEventListener("message",this.handleMessage.bind(this),!1):window.attachEvent("onmessage",this.handleMessage.bind(this))},methods:{onSubmit:function(t){var e=this;this.credentials=t,this.$store.dispatch(o["e"],t).then(function(t){e.result=t,t>0&&e.redirect()})},redirect:function(){this.returnUrl?this.$router.push({path:this.returnUrl}):this.$router.push({name:"home"})},sendEmail:function(){var t=this;this.$store.dispatch(o["j"],this.credentials.email).then(function(){t.emailSend=!0})},fbLogin:function(){this.authWindow=window.open(C["b"],"","width=600,height=400")},handleMessage:function(t){if(t.origin===C["c"])try{var e=JSON.parse(t.data);"fbAuth"===e.type&&this.handleFBLogin(e)}catch(a){}},handleFBLogin:function(t){alert("handleFBLogin"),console.log(t)}}},L=E,y=(a("ffad"),a("0798")),k=Object(v["a"])(L,n,s,!1,null,"e56704fa",null);k.options.__file="Login.vue";e["default"]=k.exports;h()(k,{VAlert:y["a"],VBtn:p["a"],VFlex:b["a"],VLayout:w["a"]})},"91c2":function(t,e,a){"use strict";var n=a("22e5"),s=a.n(n);s.a},ffad:function(t,e,a){"use strict";var n=a("ffcf"),s=a.n(n);s.a},ffcf:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ea844016.bb5554a4.js.map