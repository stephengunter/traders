{"version":3,"sources":["webpack:///./src/admin/views/Auth.vue?19c3","webpack:///src/admin/views/Auth.vue","webpack:///./src/admin/views/Auth.vue?077d","webpack:///./src/admin/views/Auth.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fluid","grid-list-xl","fill-height","justify-center","align-center","staticRenderFns","Authvue_type_script_lang_js_","name","data","returnUrl","beforeMount","_this","$route","query","$store","dispatch","actions_type","then","user","tokenStatus","jwt","token","redirect","redirectToLogin","methods","$router","push","path","window","location","concat","config","views_Authvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","installComponents_default","VContainer","VLayout"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,eAAyBE,MAAA,CAAOC,MAAA,GAAAC,eAAA,GAAAC,cAAA,KAA+C,CAAAL,EAAA,YAAiBE,MAAA,CAAOI,iBAAA,GAAAC,eAAA,OAAuC,IACvOC,EAAA,uCCeAC,EAAA,CACAC,KAAA,WACAC,KAFA,WAGA,OACAC,UAAA,KAGAC,YAPA,WAOA,IAAAC,EAAAjB,KACAA,KAAAkB,OAAAC,OAAAnB,KAAAkB,OAAAC,MAAAJ,YACAf,KAAAe,UAAAf,KAAAkB,OAAAC,MAAAJ,WAGAf,KAAAoB,OAAAC,SAAAC,EAAA,MAAAC,KAAA,SAAAC,GACA,GAAAA,EAAA,CACA,IAAAC,EAAAC,EAAA,KAAAD,eACA,IAAAA,EAEAR,EAAAG,OAAAC,SAAAC,EAAA,MAAAC,KAAA,SAAAI,GACAA,EACAV,EAAAW,WAGAX,EAAAY,oBAGA,IAAAJ,EAEAR,EAAAG,OAAAC,SAAAC,EAAA,MAAAC,KAAA,SAAAI,GACAA,EACAV,EAAAW,WAGAX,EAAAY,oBAKAZ,EAAAW,gBAIAX,EAAAY,qBAKAC,QAAA,CACAF,SADA,WAEA5B,KAAAe,UAAAf,KAAA+B,QAAAC,KAAA,CAAAC,KAAAjC,KAAAe,YACAf,KAAA+B,QAAAC,KAAA,CAAAnB,KAAA,UAEAgB,gBALA,WAMAK,OAAAC,SAAA,GAAAC,OAAAC,EAAA,4BCpEgZC,EAAA,2DCOhZC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAxC,EACAa,GACF,EACA,KACA,KACA,MAIA4B,EAAAG,QAAAC,OAAA,WACeC,EAAA,WAAAL,EAAiB,QAMhCM,IAAiBN,EAAA,CACfO,aAAA,KACAC,UAAA","file":"js/chunk-2d0d5c5c.76b90b5b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"justify-center\":\"\",\"align-center\":\"\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<v-container fluid grid-list-xl fill-height>\r\n     <v-layout justify-center  align-center>\r\n\t\t\t\r\n     </v-layout>\r\n\t</v-container>\r\n    \r\n\t\r\n</template>\r\n\r\n<script>\r\nimport { CHECK_AUTH, REFRESH_TOKEN } from '../store/actions.type';\r\n\r\nimport JwtService from '@/common/jwt';\r\nimport { LOGIN_URL } from '@/common/config';\r\n\r\nexport default {\r\n\tname: 'AuthView',\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\treturnUrl: ''\r\n\t\t}\r\n\t},\r\n\tbeforeMount(){\r\n      if(this.$route.query && this.$route.query.returnUrl){\r\n         this.returnUrl = this.$route.query.returnUrl;\r\n\t\t}\r\n\r\n\t\tthis.$store.dispatch(CHECK_AUTH).then((user) => {\r\n\t\t\tif(user){  \r\n\t\t\t\tlet tokenStatus = JwtService.tokenStatus();\r\n\t\t\t\tif(tokenStatus === -1){\r\n\t\t\t\t\t//token過期\r\n\t\t\t\t\tthis.$store.dispatch(REFRESH_TOKEN).then(token => {\t\r\n\t\t\t\t\t\tif(token){\r\n\t\t\t\t\t\t\tthis.redirect();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t//REFRESH_TOKEN 失敗\r\n\t\t\t\t\t\t\tthis.redirectToLogin();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\t\r\n\t\t\t\t}else if(tokenStatus === 0) {\r\n\t\t\t\t\t//token 即將到期\r\n\t\t\t\t\tthis.$store.dispatch(REFRESH_TOKEN).then(token => {\t\r\n\t\t\t\t\t\tif(token){\r\n\t\t\t\t\t\t\tthis.redirect();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t//REFRESH_TOKEN 失敗\r\n\t\t\t\t\t\t\tthis.redirectToLogin();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\t   \r\n\t\t\t\t}else{\r\n\t\t\t\t\t//token正常\r\n\t\t\t\t\tthis.redirect();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.redirectToLogin();\r\n\t\t\t}\r\n\t\t})\r\n\r\n   },\r\n\tmethods: {\r\n\t\tredirect(){\r\n         if(this.returnUrl) this.$router.push({ path: this.returnUrl });\r\n         else this.$router.push({ name: 'home' });\r\n      },\r\n\t\tredirectToLogin(){\r\n\t\t\twindow.location = `${LOGIN_URL}?returnUrl=admin`;\r\n\t\t},\r\n\r\n\t}\r\n}\r\n</script>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auth.vue?vue&type=template&id=aa6470b6&\"\nimport script from \"./Auth.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Auth.vue\"\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\ninstallComponents(component, {\n  VContainer,\n  VLayout,\n})\n"],"sourceRoot":""}