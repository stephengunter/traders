(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230170"],{eb96:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.pageList?i("v-container",{attrs:{fluid:"","grid-list-xl":"","fill-height":""}},[i("v-layout",{attrs:{"justify-center":"","align-center":""}},[i("v-flex",{attrs:{xs12:""}},[i("material-card",[i("v-card-text",[i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[i("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.params.keyword,callback:function(e){t.$set(t.params,"keyword",e)},expression:"params.keyword"}})],1)]),i("v-flex",{staticClass:"text-lg-right",attrs:{xs12:"",sm6:"",md6:""}},[i("v-tooltip",{attrs:{top:"","content-class":"top"}},[i("v-btn",{staticClass:"mr-2",attrs:{slot:"activator",disabled:!t.canCreate,color:"info",icon:""},on:{click:function(e){return e.preventDefault(),t.create(e)}},slot:"activator"},[i("v-icon",[t._v("mdi-plus-circle")])],1),i("span",{staticClass:"cn"},[t._v("新增")])],1),i("v-tooltip",{attrs:{top:"","content-class":"top"}},[i("v-btn",{attrs:{slot:"activator",disabled:!t.canRemove,color:"error",icon:""},on:{click:function(e){return e.preventDefault(),t.remove(e)}},slot:"activator"},[i("v-icon",[t._v("mdi-delete-circle")])],1),i("span",{staticClass:"cn"},[t._v("刪除")])],1),i("v-dialog",{attrs:{width:"480px"},model:{value:t.deleting,callback:function(e){t.deleting=e},expression:"deleting"}},[i("Confirm",{on:{ok:t.submitDelete,cancel:t.cancelDelete}})],1),i("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.editting,callback:function(e){t.editting=e},expression:"editting"}},[t.editting?i("stock-edit",{attrs:{model:t.model},on:{submit:t.submit,cancel:t.cancelEdit}}):t._e()],1)],1)],1),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{sm12:""}},[i("v-data-table",{attrs:{"select-all":"",headers:t.headers,items:t.stocks,"hide-actions":"","item-key":"id"},scopedSlots:t._u([{key:"headerCell",fn:function(e){var a=e.header;return[i("span",{staticClass:"subheading font-weight-light text-success text--darken-3 cn"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(a.text)+"\n\t\t\t\t\t\t\t\t\t\t")])]}},{key:"items",fn:function(e){return[i("td",[i("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"props.selected"}})],1),i("td",{staticClass:"cn"},[t._v(t._s(e.item.name)+"  "),e.item.ignore?i("v-icon",[t._v("mdi-cancel")]):t._e()],1),i("td",[t._v(t._s(e.item.code))]),i("td",[t._v(t._s(e.item.weight))]),i("td",[i("v-tooltip",{attrs:{top:"","content-class":"top"}},[i("a",{attrs:{slot:"activator",href:"#",icon:""},on:{click:function(i){i.preventDefault(),t.edit(e.item.id)}},slot:"activator"},[i("v-icon",{attrs:{small:"",color:"success"}},[t._v("mdi-pencil")])],1),i("span",{staticClass:"cn"},[t._v("編輯")])])],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1),i("table-pager",{attrs:{model:t.pageList,canPage:!1}})],1)],1)],1)],1)],1):t._e()},s=[],n=i("be94"),c=i("2f62"),o=i("ce9b"),l=i("f888"),r=i("dad0"),d=i("37a2"),u=i("9617"),m=i("9420"),h={name:"StocksView",components:{"material-card":r["a"],"stock-edit":u["a"],"table-pager":d["a"],Confirm:m["a"]},data:function(){return{params:{keyword:"",page:1,pageSize:10},headers:[{sortable:!1,text:"名稱",value:"name"},{sortable:!1,text:"代碼",value:"code"},{sortable:!1,text:"權重 (%)",value:"weight"},{sortable:!1,text:"",value:"",width:"50px"}],selected:[],editting:!1,deleting:!1,model:null}},computed:Object(n["a"])({},Object(c["c"])({pageList:function(t){return t.stocks.pageList}}),{stocks:function(){return this.pageList?this.pageList.viewList:[]},canRemove:function(){return!this.editting&&this.selected.length>0},canCreate:function(){return!this.editting&&!this.deleting}}),beforeMount:function(){this.fetchData()},methods:{fetchData:function(){this.$store.commit(o["a"]),this.$store.dispatch(l["e"],this.params).catch(function(t){Bus.$emit("errors")})},search:function(){this.fetchData()},create:function(){var t=this;this.$store.commit(o["a"]),this.selected=[],this.$store.dispatch(l["b"]).then(function(e){t.model=e,t.editting=!0}).catch(function(t){Bus.$emit("errors")})},edit:function(t){var e=this;this.$store.commit(o["a"]),this.selected=[],this.$store.dispatch(l["d"],t).then(function(t){e.model=t,e.editting=!0}).catch(function(t){Bus.$emit("errors")})},cancelEdit:function(){this.model=null,this.editting=!1},remove:function(){this.deleting=!0},submitDelete:function(){var t=this;this.$store.commit(o["a"]);var e=this.selected.map(function(t){return t.id});this.$store.dispatch(l["c"],e.join(",")).then(function(){t.fetchData(),t.model=null,t.deleting=!1}).catch(function(t){Bus.$emit("errors")})},cancelDelete:function(){this.deleting=!1},submit:function(){var t=this;this.$store.commit(o["a"]);var e=this.model.id?l["j"]:l["i"];this.$store.dispatch(e,this.model).then(function(){t.fetchData(),Bus.$emit("success"),t.model=null,t.editting=!1}).catch(function(e){e?t.$store.commit(o["f"],e):Bus.$emit("errors")})}}},f=h,v=i("2877"),p=i("6544"),g=i.n(p),b=i("8336"),x=i("99d9"),k=i("ac7c"),_=i("a523"),w=i("8fea"),$=i("169a"),C=i("0e8f"),D=i("132d"),y=i("a722"),V=i("2677"),L=i("3a2f"),B=Object(v["a"])(f,a,s,!1,null,null,null);B.options.__file="Stocks.vue";e["default"]=B.exports;g()(B,{VBtn:b["a"],VCardText:x["b"],VCheckbox:k["a"],VContainer:_["a"],VDataTable:w["a"],VDialog:$["a"],VFlex:C["a"],VIcon:D["a"],VLayout:y["a"],VTextField:V["a"],VTooltip:L["a"]})}}]);
//# sourceMappingURL=chunk-2d230170.1d5e3045.js.map