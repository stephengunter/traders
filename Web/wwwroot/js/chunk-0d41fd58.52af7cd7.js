(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d41fd58"],{8457:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return 0===t.result?n("register-un-confirmed",{attrs:{email:t.credentials.email}}):n("div",{staticClass:"container"},[t.register?n("div",[n("h1",{staticClass:"cn"},[t._v("註冊 - 建立您的會員資料")]),n("v-alert",{attrs:{value:t.Errors.any(),color:"error",outline:""}},[n("ErrorList",{attrs:{model:t.Errors}})],1),n("RegisterForm",{attrs:{model:t.registerModel},on:{submit:t.onSubmitRegister}})],1):n("div",[n("h1",{staticClass:"cn"},[t._v("登入")]),n("v-alert",{attrs:{value:t.Errors.any(),color:"error",outline:""}},[n("ErrorList",{attrs:{model:t.Errors}})],1),n("LoginForm",{on:{submit:t.onSubmit}}),n("v-layout",{staticClass:"mt-3 cn",attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[n("a",{staticClass:"links v-breadcrumbs__item",attrs:{href:"#/forgot-password"}},[t._v("忘記密碼")]),n("a",{staticClass:"links ml-5 v-breadcrumbs__item",attrs:{href:"#/register"}},[t._v("註冊新帳號")])])],1)],1)])},s=[],r=n("be94"),a=(n("cadf"),n("551c"),n("097d"),n("2f62")),o=n("c41f"),l=n("a49b"),c=n("df21"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"error-messages":t.errors.collect("email"),label:"Email","data-vv-name":"email",required:""},model:{value:t.credentials.email,callback:function(e){t.$set(t.credentials,"email",e)},expression:"credentials.email"}}),n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|max:12",expression:"'required|max:12'"}],attrs:{type:"password",counter:12,"error-messages":t.errors.collect("password"),label:"密碼","data-vv-name":"password",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),n("v-layout",{staticClass:"mt-1",attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-btn",{staticClass:"cn",attrs:{type:"submit",color:"success"},on:{click:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v("登入")])],1)],1)],1)},d=[],m={name:"LoginForm",data:function(){return{credentials:{email:"",password:""}}},methods:{onSubmit:function(){var t=this;this.$validator.validate().then(function(e){e&&t.$emit("submit",t.credentials)})}}},f=m,h=n("2877"),v=n("6544"),g=n.n(v),p=n("8336"),b=n("0e8f"),w=n("a722"),_=n("2677"),x=Object(h["a"])(f,u,d,!1,null,null,null);x.options.__file="Form.vue";var L=x.exports;g()(x,{VBtn:p["a"],VFlex:b["a"],VLayout:w["a"],VTextField:_["a"]});var S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.emailSend?n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-alert",{staticClass:"title cn",attrs:{value:!0,type:"info"}},[n("span",{staticClass:"cn"},[t._v("\n               已經Email一封驗證信給您.  請查看您的Email來完成驗證.  \n            ")])])],1)],1):n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-alert",{staticClass:"title",attrs:{value:!0,color:"error",icon:"mdi-alert",outline:""}},[n("span",{staticClass:"cn"},[t._v("\n               您的Email尚未驗證\n            ")])])],1),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{staticClass:"cn",staticStyle:{margin:"6px 0px"},attrs:{color:"info"},on:{click:t.sendEmail}},[t._v("\n            重發認證信\n         ")])],1)],1)],1)},E=[],$={props:{email:{type:String,default:""}},data:function(){return{emailSend:!1}},methods:{sendEmail:function(){var t=this;this.$store.dispatch(o["n"],{email:this.email}).then(function(){t.emailSend=!0})}}},C=$,k=n("0798"),F=Object(h["a"])(C,S,E,!1,null,null,null);F.options.__file="UnConfirmed.vue";var y=F.exports;g()(F,{VAlert:k["a"],VBtn:p["a"],VFlex:b["a"],VLayout:w["a"]});var B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"loginBtn loginBtn--facebook",on:{click:function(e){return e.preventDefault(),t.fbLogin(e)}}},[t._v("\n   使用 facebook 登入\n")])},O=[],R={name:"FacebookLogin",data:function(){return{authWindow:null}},created:function(){window.addEventListener?window.addEventListener("message",this.handleMessage.bind(this),!1):window.attachEvent("onmessage",this.handleMessage.bind(this))},methods:{fbLogin:function(){this.authWindow=window.open(Config.FB_LOGIN_URL,"","width=600,height=400")},handleMessage:function(t){if(t.origin===Config.SITE_URL)try{var e=JSON.parse(t.data);"fbAuth"===e.type&&this.handleFBLogin(e)}catch(n){}},handleFBLogin:function(t){this.authWindow&&this.authWindow.close(),t.status?this.$emit("success",t.accessToken):this.$emit("failed")}}},V=R,I=Object(h["a"])(V,B,O,!1,null,null,null);I.options.__file="Facebook.vue";var U=I.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"loginBtn loginBtn--google"},[n("g-signin-button",{attrs:{params:t.googleSignInParams},on:{success:t.onSignInSuccess,error:t.onSignInError}},[t._v("\n   使用 google 登入\n   ")])],1)},q=[],G={name:"GoogleLogin",data:function(){return{googleSignInParams:{client_id:"".concat(Config.GOOGLE_API.client_id,".apps.googleusercontent.com")}}},methods:{onSignInSuccess:function(t){this.$emit("success",t.getAuthResponse().id_token)},onSignInError:function(t){this.$emit("failed")}}},M=G,A=Object(h["a"])(M,j,q,!1,null,null,null);A.options.__file="Google.vue";var W=A.exports,N=n("802f"),D={name:"RwvLogin",components:{ErrorList:c["a"],LoginForm:L,FacebookLogin:U,GoogleLogin:W,RegisterForm:N["a"],"register-un-confirmed":y},data:function(){return{credentials:null,result:-1,returnUrl:"",authWindow:null,register:!1,registerModel:null}},computed:Object(r["a"])({},Object(a["c"])({Errors:function(t){return t.auth.errors}})),beforeMount:function(){this.returnUrl=this.$route.query.returnUrl},methods:{onSubmit:function(t){var e=this;this.credentials=t,this.$store.dispatch(o["h"],t).then(function(t){e.result=t,t>0&&e.onSuccess()})},onSuccess:function(){this.redirect()},redirect:function(){this.returnUrl?"admin"===this.returnUrl?window.location=l["a"]:this.$router.push({path:this.returnUrl}):this.$router.push({name:"home"})},googleLoginFailed:function(){Bus.$emit("errors",{msg:"登入失敗"})},handleGoogleLogin:function(t){var e=this;this.$store.dispatch(o["f"],t).then(function(t){t?e.initRegister(t):e.onSuccess()})},facebookLoginFailed:function(){Bus.$emit("errors",{msg:"登入失敗"})},handleFacebookLogin:function(t){var e=this;this.$store.dispatch(o["d"],t).then(function(t){t?e.initRegister(t):e.onSuccess()})},initRegister:function(t){this.registerModel=t,this.register=!0},onSubmitRegister:function(t){var e=this;this.$store.dispatch(o["j"],t).then(function(t){e.result=t,t>0&&e.onSuccess()})}}},J=D,P=(n("9989"),Object(h["a"])(J,i,s,!1,null,"1679c45f",null));P.options.__file="Login.vue";e["default"]=P.exports;g()(P,{VAlert:k["a"],VFlex:b["a"],VLayout:w["a"]})},9989:function(t,e,n){"use strict";var i=n("ff0d"),s=n.n(i);s.a},ff0d:function(t,e,n){}}]);
//# sourceMappingURL=chunk-0d41fd58.52af7cd7.js.map