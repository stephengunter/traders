{"version":3,"sources":["webpack:///./src/client/views/Login.vue?d3ae","webpack:///./src/client/components/login/Form.vue?d59b","webpack:///src/client/components/login/Form.vue","webpack:///./src/client/components/login/Form.vue?f9e0","webpack:///./src/client/components/login/Form.vue","webpack:///./src/client/components/login/Facebook.vue?895c","webpack:///src/client/components/login/Facebook.vue","webpack:///./src/client/components/login/Facebook.vue?c44e","webpack:///./src/client/components/login/Facebook.vue","webpack:///./src/client/components/login/Google.vue?1a0e","webpack:///src/client/components/login/Google.vue","webpack:///./src/client/components/login/Google.vue?6332","webpack:///./src/client/components/login/Google.vue","webpack:///src/client/views/Login.vue","webpack:///./src/client/views/Login.vue?ec9e","webpack:///./src/client/views/Login.vue","webpack:///./src/client/views/Login.vue?5e9e"],"names":["render","_vm","this","_h","$createElement","_c","_self","result","staticClass","attrs","row","wrap","xs12","value","type","_v","color","icon","outline","staticStyle","margin","on","click","sendEmail","Errors","any","model","registerModel","submit","onSubmitRegister","onSubmit","href","staticRenderFns","Formvue_type_template_id_02535696_render","$event","preventDefault","directives","name","rawName","expression","error-messages","errors","collect","label","data-vv-name","required","credentials","callback","$$v","$set","counter","Formvue_type_template_id_02535696_staticRenderFns","Formvue_type_script_lang_js_","data","email","password","methods","_this","$validator","validate","then","valid","$emit","login_Formvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","Form","installComponents_default","VBtn","VFlex","VLayout","VTextField","Facebookvue_type_template_id_43b987f6_render","fbLogin","Facebookvue_type_template_id_43b987f6_staticRenderFns","Facebookvue_type_script_lang_js_","authWindow","created","window","addEventListener","handleMessage","bind","attachEvent","open","Config","FB_LOGIN_URL","event","origin","SITE_URL","JSON","parse","handleFBLogin","e","close","status","accessToken","login_Facebookvue_type_script_lang_js_","Facebook_component","Facebook","Googlevue_type_template_id_4260813f_render","params","googleSignInParams","success","onSignInSuccess","error","onSignInError","Googlevue_type_template_id_4260813f_staticRenderFns","Googlevue_type_script_lang_js_","client_id","concat","GOOGLE_API","googleUser","getAuthResponse","id_token","login_Googlevue_type_script_lang_js_","Google_component","Google","Loginvue_type_script_lang_js_","components","ErrorList","LoginForm","FacebookLogin","GoogleLogin","RegisterForm","register_Form","returnUrl","emailSend","register","computed","objectSpread","vuex_esm","state","auth","beforeMount","$route","query","$store","dispatch","actions_type","onSuccess","redirect","location","config","$router","push","path","_this2","googleLoginFailed","Bus","msg","handleGoogleLogin","token","_this3","initRegister","facebookLoginFailed","handleFacebookLogin","_this4","user","_this5","views_Loginvue_type_script_lang_js_","Login_component","__webpack_exports__","VAlert","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_aa6fb43a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_vuetify_loader_lib_loader_js_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_aa6fb43a_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-45dd1528.67b80ca1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.result === 0)?_c('div',{staticClass:\"container\"},[(_vm.emailSend)?_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-alert',{staticClass:\"title cn\",attrs:{\"value\":true,\"type\":\"info\"}},[_c('span',{staticClass:\"cn\"},[_vm._v(\"\\n             已經Email一封驗證信給您.  請查看您的Email來完成驗證.  \\n            \")])])],1)],1):_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-alert',{staticClass:\"title\",attrs:{\"value\":true,\"color\":\"error\",\"icon\":\"warning\",\"outline\":\"\"}},[_c('span',{staticClass:\"cn\"},[_vm._v(\"\\n               您的Email尚未驗證\\n            \")])])],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"cn\",staticStyle:{\"margin\":\"6px 0px\"},attrs:{\"color\":\"info\"},on:{\"click\":_vm.sendEmail}},[_vm._v(\"\\n           重發認證信\\n         \")])],1)],1)],1):_c('div',{staticClass:\"container\"},[(_vm.register)?_c('div',[_c('h1',{staticClass:\"cn\"},[_vm._v(\"註冊 - 建立您的會員資料\")]),_c('v-alert',{attrs:{\"value\":_vm.Errors.any(),\"color\":\"error\",\"outline\":\"\"}},[_c('ErrorList',{attrs:{\"model\":_vm.Errors}})],1),_c('RegisterForm',{attrs:{\"model\":_vm.registerModel},on:{\"submit\":_vm.onSubmitRegister}})],1):_c('div',[_c('h1',{staticClass:\"cn\"},[_vm._v(\"登入\")]),_c('v-alert',{attrs:{\"value\":_vm.Errors.any(),\"color\":\"error\",\"outline\":\"\"}},[_c('ErrorList',{attrs:{\"model\":_vm.Errors}})],1),_c('LoginForm',{on:{\"submit\":_vm.onSubmit}}),_c('v-layout',{staticClass:\"mt-3 cn\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"mt-3\",attrs:{\"xs12\":\"\"}},[_c('a',{staticClass:\"links v-breadcrumbs__item\",attrs:{\"href\":\"#/forgot-password\"}},[_vm._v(\"忘記密碼\")]),_c('a',{staticClass:\"links ml-5 v-breadcrumbs__item\",attrs:{\"href\":\"#/register\"}},[_vm._v(\"註冊新帳號\")])])],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|email'),expression:\"'required|email'\"}],attrs:{\"error-messages\":_vm.errors.collect('email'),\"label\":\"Email\",\"data-vv-name\":\"email\",\"required\":\"\"},model:{value:(_vm.credentials.email),callback:function ($$v) {_vm.$set(_vm.credentials, \"email\", $$v)},expression:\"credentials.email\"}}),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|max:12'),expression:\"'required|max:12'\"}],attrs:{\"type\":\"password\",\"counter\":12,\"error-messages\":_vm.errors.collect('password'),\"label\":\"密碼\",\"data-vv-name\":\"password\",\"required\":\"\"},model:{value:(_vm.credentials.password),callback:function ($$v) {_vm.$set(_vm.credentials, \"password\", $$v)},expression:\"credentials.password\"}}),_c('v-layout',{staticClass:\"mt-1\",attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-btn',{staticClass:\"cn\",attrs:{\"type\":\"submit\",\"color\":\"success\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_vm._v(\"登入\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <form  @submit.prevent=\"onSubmit\">\r\n      <v-text-field\r\n         v-validate=\"'required|email'\"\r\n         v-model=\"credentials.email\"\r\n         :error-messages=\"errors.collect('email')\"\r\n         label=\"Email\"\r\n         data-vv-name=\"email\"\r\n         required\r\n      ></v-text-field>\r\n\r\n      <v-text-field\r\n         type=\"password\"\r\n         v-validate=\"'required|max:12'\"\r\n         v-model=\"credentials.password\"\r\n         :counter=\"12\"\r\n         :error-messages=\"errors.collect('password')\"\r\n         label=\"密碼\"\r\n         data-vv-name=\"password\"\r\n         required\r\n      ></v-text-field>\r\n      <v-layout class=\"mt-1\" row wrap>\r\n         <v-flex xs12>\r\n            <v-btn type=\"submit\" @click.prevent=\"onSubmit\" color=\"success\" class=\"cn\">登入</v-btn>\r\n         </v-flex>\r\n      </v-layout>\r\n      \r\n   </form>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n   name: 'LoginForm',\r\n   data() {\r\n      return {\r\n         credentials: {\r\n            email: '',\r\n            password: '',\r\n         }\r\n      }\r\n   },\r\n   methods: {\r\n      onSubmit() {\r\n         this.$validator.validate().then(valid => {\r\n            if(valid) this.$emit('submit', this.credentials);\r\n         });         \r\n      }\r\n   }\r\n};\r\n</script>\r\n\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=02535696&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Form.vue\"\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VFlex } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\nimport { VTextField } from 'vuetify/lib'\ninstallComponents(component, {\n  VBtn,\n  VFlex,\n  VLayout,\n  VTextField,\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"loginBtn loginBtn--facebook\",on:{\"click\":function($event){$event.preventDefault();return _vm.fbLogin($event)}}},[_vm._v(\"\\n   使用 facebook 登入\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <button @click.prevent=\"fbLogin\" class=\"loginBtn loginBtn--facebook\">\r\n      使用 facebook 登入\r\n   </button>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n   name: 'FacebookLogin',\r\n   data() {\r\n      return {\r\n         authWindow: null,\r\n      }\r\n   },\r\n   created(){\r\n      if (window.addEventListener) {\r\n         window.addEventListener('message', this.handleMessage.bind(this), false);\r\n      } else {\r\n         window.attachEvent('onmessage', this.handleMessage.bind(this));\r\n      }\r\n   },\r\n   methods: {\r\n      fbLogin(){\r\n         this.authWindow = window.open(Config.FB_LOGIN_URL, '', 'width=600,height=400');         \r\n      },\r\n      handleMessage(event){\r\n        \r\n         if (event.origin !== Config.SITE_URL){\r\n            return;\r\n         }  \r\n\r\n         try { \r\n            const result = JSON.parse(event.data);\r\n            if(result.type === 'fbAuth'){\r\n               this.handleFBLogin(result);\r\n            }\r\n         }\r\n         catch (e) {}//與login無關,忽略 \r\n      },\r\n      handleFBLogin(result){\r\n         if (this.authWindow) {\r\n            this.authWindow.close();\r\n         }\r\n         if (!result.status) {\r\n            this.$emit('failed');\r\n         } else {\r\n            this.$emit('success', result.accessToken);\r\n         }\r\n      },\r\n   }\r\n};\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Facebook.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Facebook.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Facebook.vue?vue&type=template&id=43b987f6&\"\nimport script from \"./Facebook.vue?vue&type=script&lang=js&\"\nexport * from \"./Facebook.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Facebook.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"loginBtn loginBtn--google\"},[_c('g-signin-button',{attrs:{\"params\":_vm.googleSignInParams},on:{\"success\":_vm.onSignInSuccess,\"error\":_vm.onSignInError}},[_vm._v(\"\\n   使用 google 登入\\n   \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <button class=\"loginBtn loginBtn--google\">\r\n      <g-signin-button \r\n      :params=\"googleSignInParams\"\r\n      @success=\"onSignInSuccess\"\r\n      @error=\"onSignInError\">\r\n      使用 google 登入\r\n      </g-signin-button>\r\n   </button>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\n\r\nexport default {\r\n   name: 'GoogleLogin',\r\n   data() {\r\n      return {\r\n         googleSignInParams: {\r\n            client_id:  `${Config.GOOGLE_API.client_id}.apps.googleusercontent.com`\r\n         }\r\n      }\r\n   },\r\n   methods: {\r\n      onSignInSuccess (googleUser) {\r\n         this.$emit('success', googleUser.getAuthResponse().id_token);\r\n      },\r\n      onSignInError (error) {\r\n         this.$emit('failed');\r\n      }\r\n   }\r\n};\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Google.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vuetify-loader/lib/loader.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Google.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Google.vue?vue&type=template&id=4260813f&\"\nimport script from \"./Google.vue?vue&type=script&lang=js&\"\nexport * from \"./Google.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Google.vue\"\nexport default component.exports","<template>\r\n   <div v-if=\"result === 0\" class=\"container\">\r\n      <v-layout v-if=\"emailSend\" row wrap>\r\n         <v-flex xs12>\r\n            <v-alert class=\"title cn\" :value=\"true\"  type=\"info\">\r\n               <span class=\"cn\">\r\n                已經Email一封驗證信給您.  請查看您的Email來完成驗證.  \r\n               </span>  \r\n            </v-alert>\r\n         </v-flex>\r\n      </v-layout>\r\n      <v-layout v-else row wrap>\r\n         <v-flex xs12>\r\n            <v-alert :value=\"true\"  color=\"error\"  icon=\"warning\" outline  class=\"title\">\r\n               <span class=\"cn\" >\r\n                  您的Email尚未驗證\r\n               </span>  \r\n            </v-alert>\r\n         </v-flex>\r\n         <v-flex xs12>\r\n            <v-btn @click=\"sendEmail\" color=\"info\" class=\"cn\" style=\"margin: 6px 0px\">\r\n              重發認證信\r\n            </v-btn>\r\n         </v-flex>\r\n      </v-layout>\r\n   </div>\r\n   <div v-else class=\"container\">\r\n      <div v-if=\"register\">\r\n         <h1 class=\"cn\">註冊 - 建立您的會員資料</h1>\r\n         <v-alert :value=\"Errors.any()\" color=\"error\" outline>\r\n            <ErrorList :model=\"Errors\" />\r\n         </v-alert>\r\n         <RegisterForm :model=\"registerModel\" @submit=\"onSubmitRegister\" />         \r\n      </div>\r\n      <div v-else>\r\n         <h1 class=\"cn\">登入</h1>\r\n         <v-alert :value=\"Errors.any()\" color=\"error\" outline>\r\n            <ErrorList :model=\"Errors\" />\r\n         </v-alert>\r\n         <LoginForm @submit=\"onSubmit\" />\r\n         <v-layout class=\"mt-3 cn\" row wrap>\r\n            <!-- <v-flex xs12 >\r\n               <FacebookLogin \r\n                @success=\"handleFacebookLogin\" @failed=\"facebookLoginFailed\"\r\n               />\r\n            </v-flex>\r\n            <v-flex xs12 class=\"mt-3\">\r\n               <GoogleLogin \r\n                @success=\"handleGoogleLogin\" @failed=\"googleLoginFailed\"\r\n               />\r\n            </v-flex> -->\r\n            <v-flex xs12 class=\"mt-3\">\r\n               <a href=\"#/forgot-password\" class=\"links v-breadcrumbs__item\">忘記密碼</a>\r\n               \r\n               <a href=\"#/register\" class=\"links ml-5 v-breadcrumbs__item\">註冊新帳號</a>\r\n            \r\n            </v-flex>\r\n         </v-layout>\r\n      </div>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport { LOGIN, FB_LOGIN, GOOGLE_LOGIN, OAUTH_REGISTER, SEND_CONFIRM_EMAIL } from '../store/actions.type';\r\nimport { ADMIN_URL } from '@/common/config';\r\n\r\nimport ErrorList from '@/components/Errors';\r\nimport LoginForm from '../components/login/Form';\r\nimport FacebookLogin from '../components/login/Facebook';\r\nimport GoogleLogin from '../components/login/Google';\r\nimport RegisterForm from '../components/register/Form';\r\n\r\nexport default {\r\n   name: 'RwvLogin',\r\n   components: {\r\n      ErrorList,\r\n      LoginForm,\r\n      FacebookLogin,\r\n      GoogleLogin,\r\n      RegisterForm\r\n   },\r\n   data () {\r\n      return {\r\n         credentials: null,\r\n         result: -1,\r\n         returnUrl: '',\r\n\r\n         emailSend: false,\r\n\r\n         authWindow: null,\r\n         register: false,\r\n         registerModel: null\r\n      }\r\n   },\r\n   computed: {\r\n      ...mapState({\r\n         Errors: state => state.auth.errors\r\n      })\r\n   },\r\n   beforeMount(){\r\n      this.returnUrl = this.$route.query.returnUrl;\r\n   },\r\n   methods: {\r\n      onSubmit(credentials) {\r\n         this.credentials = credentials;\r\n\r\n         this.$store\r\n         .dispatch(LOGIN, credentials)\r\n         .then((result) => {\r\n            this.result = result;\r\n            if(result > 0) this.onSuccess();            \r\n         })\r\n      },\r\n      onSuccess(){\r\n         this.redirect();\r\n      },\r\n      redirect(){\r\n         if(this.returnUrl){\r\n            if(this.returnUrl === 'admin') {\r\n               window.location = ADMIN_URL;\r\n            }else {\r\n               this.$router.push({ path: this.returnUrl });\r\n            }\r\n         }\r\n         else this.$router.push({ name: 'home' });\r\n      },\r\n      sendEmail(){\r\n         this.$store\r\n         .dispatch(SEND_CONFIRM_EMAIL, this.credentials.email)\r\n         .then(() => {\r\n            this.emailSend = true;       \r\n         })\r\n      },\r\n      googleLoginFailed(){\r\n         Bus.$emit('errors', { msg: '登入失敗' });\r\n      },\r\n      handleGoogleLogin(token){\r\n         this.$store\r\n            .dispatch(GOOGLE_LOGIN, token)\r\n            .then(model => {\r\n               if(model){\r\n                  this.initRegister(model);\r\n               }else{\r\n                  //登入成功\r\n                  this.onSuccess();  \r\n               }        \r\n            })\r\n      },\r\n      facebookLoginFailed(){\r\n         Bus.$emit('errors', { msg: '登入失敗' });\r\n      },\r\n      handleFacebookLogin(token){\r\n         this.$store\r\n            .dispatch(FB_LOGIN, token)\r\n            .then(model => {\r\n               if(model){\r\n                  this.initRegister(model);\r\n               }else{\r\n                  //登入成功\r\n                  this.onSuccess();  \r\n               }        \r\n            })\r\n      },\r\n      initRegister(model){\r\n         this.registerModel = model;\r\n         this.register = true;\r\n      },\r\n      onSubmitRegister(user){\r\n         this.$store\r\n         .dispatch(OAUTH_REGISTER, user)\r\n         .then((result) => {\r\n            this.result = result;\r\n            if(result > 0) this.onSuccess();            \r\n         })\r\n      }\r\n   },\r\n   \r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.links{\r\n   font-size: 1.2rem\r\n}\r\n/* Shared */\r\n.loginBtn {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  /* width: 13em;  - apply for fixed size */\r\n  margin: 0.2em;\r\n  padding: 0 15px 0 46px;\r\n  border: none;\r\n  text-align: left;\r\n  line-height: 34px;\r\n  white-space: nowrap;\r\n  border-radius: 0.2em;\r\n  font-size: 16px;\r\n  color: #FFF;\r\n}\r\n.loginBtn:before {\r\n  content: \"\";\r\n  box-sizing: border-box;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 34px;\r\n  height: 100%;\r\n}\r\n.loginBtn:focus {\r\n  outline: none;\r\n}\r\n.loginBtn:active {\r\n  box-shadow: inset 0 0 0 32px rgba(0,0,0,0.1);\r\n}\r\n\r\n\r\n/* Facebook */\r\n.loginBtn--facebook {\r\n  background-color: #4C69BA;\r\n  background-image: linear-gradient(#4C69BA, #3B55A0);\r\n  /*font-family: \"Helvetica neue\", Helvetica Neue, Helvetica, Arial, sans-serif;*/\r\n  text-shadow: 0 -1px 0 #354C8C;\r\n}\r\n.loginBtn--facebook:before {\r\n  border-right: #364e92 1px solid;\r\n  background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_facebook.png') 6px 6px no-repeat;\r\n}\r\n.loginBtn--facebook:hover,\r\n.loginBtn--facebook:focus {\r\n  background-color: #5B7BD5;\r\n  background-image: linear-gradient(#5B7BD5, #4864B1);\r\n}\r\n\r\n\r\n/* Google */\r\n.loginBtn--google {\r\n  /*font-family: \"Roboto\", Roboto, arial, sans-serif;*/\r\n  background: #DD4B39;\r\n}\r\n.loginBtn--google:before {\r\n  border-right: #BB3F30 1px solid;\r\n  background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/14082/icon_google.png') 6px 6px no-repeat;\r\n}\r\n.loginBtn--google:hover,\r\n.loginBtn--google:focus {\r\n  background: #E74B37;\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=aa6fb43a&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=aa6fb43a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa6fb43a\",\n  null\n  \n)\n\ncomponent.options.__file = \"Login.vue\"\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAlert } from 'vuetify/lib'\nimport { VBtn } from 'vuetify/lib'\nimport { VFlex } from 'vuetify/lib'\nimport { VLayout } from 'vuetify/lib'\ninstallComponents(component, {\n  VAlert,\n  VBtn,\n  VFlex,\n  VLayout,\n})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=aa6fb43a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=aa6fb43a&scoped=true&lang=css&\""],"sourceRoot":""}